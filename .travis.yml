language: python
python:
  - 2.7
notifications:
  email:
    recipients:
      - sdksupport@vantiv.com
    on_success: always
    on_failure: always



env:
 global:
   - BUILD_DIR=`pwd`
   - MP_CONFIG_DIR=$BUILD_DIR
   - PAYFAC_MP_SDK_CONFIG=$MP_CONFIG_DIR/.payfac_mp_sdk.conf
install:
   - pip install codecov
   - python setup.py install
   - python $BUILD_DIR/tools/generate.py

script:
  - echo $BUILD_DIR
  - echo $PAYFAC_MP_SDK_CONFIG
  - cat $PAYFAC_MP_SDK_CONFIG
#   - coverage run testsimple.py
  - nosetests --with-coverage --with-xunit --verbosity=3 


  # deploy:
  #   provider: releases
  #   api_key: $GITHUB_TOKEN
  #   file_glob: true
  #   file: build/kit/dist/*
  #   skip_cleanup: true
  #   on:
  #     tags: true


after_success:
  #  - codecov
  - bash <(curl -s https://codecov.io/bash)

